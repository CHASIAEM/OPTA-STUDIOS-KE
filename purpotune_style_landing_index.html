<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Opta Studios — Portfolio (with safe fallback)</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Arial,Helvetica,sans-serif;line-height:1.6;color:#111;background:#fff}
    header{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:#111;color:#fff;position:sticky;top:0;z-index:1000}
    header img{height:60px}
    nav a{color:#fff;margin-left:1.25rem;text-decoration:none;font-weight:700}
    nav a:hover{color:#d4af37}
    .hero{background:url('https://source.unsplash.com/1600x800/?cinematic,photography') center/cover no-repeat;height:70vh;display:flex;align-items:center;justify-content:center;flex-direction:column;color:#fff;text-align:center}
    .hero h1{font-size:2.6rem;margin-bottom:.5rem}
    section{padding:3rem 1.5rem;max-width:1100px;margin:0 auto}
    .services{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
    .card{background:#f7f7f7;padding:1.25rem;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,0.06);text-align:center}
    .portfolio{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:.75rem}
    .portfolio img{width:100%;display:block;border-radius:8px;cursor:pointer;transition:transform .22s}
    .portfolio img:hover{transform:scale(1.03)}
    #portfolioNote{font-size:.95rem;color:#555;margin-top:.5rem}
    footer{background:#111;color:#d4af37;text-align:center;padding:1.5rem;margin-top:2rem}

    /* Lightbox */
    #lightbox{position:fixed;inset:0;background:rgba(0,0,0,.92);display:none;align-items:center;justify-content:center;z-index:3000;flex-direction:column}
    #lightbox.open{display:flex}
    #lightbox img{max-width:92%;max-height:82%;border-radius:8px}
    .lightbox-controls{display:flex;gap:.5rem;margin-top:1rem}
    .lightbox-btn{background:#d4af37;border:none;padding:.5rem 1rem;border-radius:6px;font-weight:700;cursor:pointer}
    .lightbox-btn:hover{background:#fff}
    .helper{font-size:.95rem;color:#777}
    pre{background:#f4f4f4;padding:.5rem;border-radius:6px;overflow:auto}

    @media (max-width:600px){
      .hero{height:48vh}
      .hero h1{font-size:1.6rem}
    }
  </style>
</head>
<body>
  <header>
    <img src="OPTA_STUDIOS LOGO WHITE.png" alt="Opta Studios Logo">
    <nav>
      <a href="#services">Services</a>
      <a href="#portfolio">Portfolio</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <section class="hero">
    <h1>Opta Studios</h1>
    <p class="helper">Photography &amp; Videography that tells your story</p>
  </section>

  <section id="services">
    <h2>Our Services</h2>
    <div class="services" style="margin-top:1rem">
      <div class="card"><h3>Photography</h3><p>Events, portraits, product — shot and edited professionally.</p></div>
      <div class="card"><h3>Videography</h3><p>Cinematic videos for brands and celebrations.</p></div>
      <div class="card"><h3>Editing</h3><p>Color grading, retouching and finishing that pops.</p></div>
    </div>
  </section>

  <section id="portfolio">
    <h2>Portfolio</h2>
    <div id="portfolioGrid" class="portfolio" aria-live="polite">
      <!-- images inserted here -->
    </div>
    <div id="portfolioNote"></div>
    <div style="margin-top:1rem;">
      <div class="helper">How to use your own images</div>
      <div style="margin-top:.5rem;color:#444">Place your image files in a folder named <code>/portfolio/</code> and create (or update) a file named <code>images.json</code> in your site root with a JSON array of filenames, for example:</div>
      <pre>["photo1.jpg","photo2.jpg","wedding1.jpg"]</pre>
    </div>
  </section>

  <section id="about">
    <h2>About</h2>
    <p style="color:#444;margin-top:.5rem">Opta Studios creates visuals for brands and people — specialising in photography and video production.</p>
  </section>

  <section id="contact">
    <h2>Contact</h2>
    <form onsubmit="event.preventDefault();alert('Demo: message submitted')" style="max-width:560px;margin-top:1rem">
      <input required name="name" placeholder="Your name" style="padding:.6rem;margin-bottom:.6rem;width:100%">
      <input required type="email" name="email" placeholder="Your email" style="padding:.6rem;margin-bottom:.6rem;width:100%">
      <textarea required name="message" rows="5" placeholder="Your message" style="padding:.6rem;width:100%;margin-bottom:.6rem"></textarea>
      <button type="submit" style="background:#d4af37;border:none;padding:.6rem 1rem;border-radius:6px;font-weight:700">Send Message</button>
    </form>
  </section>

  <footer>
    <img src="OPTA_STUDIOS LOGO WHITE.png" alt="Opta Studios Logo" style="height:44px;margin-bottom:.5rem;display:block;margin-left:auto;margin-right:auto">
    <div style="margin-top:.5rem">© 2025 Opta Studios</div>
    <div style="margin-top:.25rem">Phone: <a href="tel:+254768356345" style="color:inherit">0768356345</a> · Email: <a href="mailto:emajanichasia@gmail.com" style="color:inherit">emajanichasia@gmail.com</a></div>
  </footer>

  <!-- Lightbox -->
  <div id="lightbox" role="dialog" aria-modal="true">
    <img src="" alt="Expanded portfolio image" id="lightboxImg">
    <div class="lightbox-controls">
      <button id="prevBtn" class="lightbox-btn" aria-label="Previous image">◀ Prev</button>
      <button id="nextBtn" class="lightbox-btn" aria-label="Next image">Next ▶</button>
    </div>
  </div>

  <script>
    // imagesList will hold full image URLs or local paths (e.g. "portfolio/photo1.jpg")
    let imagesList = [];
    let currentIndex = 0;

    const portfolioGrid = document.getElementById('portfolioGrid');
    const portfolioNote = document.getElementById('portfolioNote');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    // Fallback images (remote) used when images.json is not available in the sandbox.
    const FALLBACK_IMAGES = [
      'https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=1200&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?q=80&w=1200&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1200&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1200&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1200&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1503602642458-232111445657?q=80&w=1200&auto=format&fit=crop'
    ];

    // Load portfolio images. Attempt to fetch images.json first. If that fails, use fallback images.
    (async function loadPortfolio() {
      try {
        const res = await fetch('images.json', {cache: 'no-store'});
        if (!res.ok) throw new Error('images.json not found');
        const data = await res.json();
        if (!Array.isArray(data) || data.length === 0) throw new Error('images.json is empty or not an array');

        // Map filenames to local paths (portfolio/filename) unless they look like full URLs
        imagesList = data.map(item => {
          if (typeof item !== 'string') return '';
          const trimmed = item.trim();
          return trimmed.match(/^https?:\/\//i) ? trimmed : `portfolio/${trimmed}`;
        }).filter(Boolean);

        portfolioNote.innerHTML = 'Loaded images from <code>images.json</code>. Add/remove files in <code>/portfolio/</code> and update <code>images.json</code>.';
      } catch (err) {
        console.warn('Could not load images.json, using fallback images.', err);
        imagesList = FALLBACK_IMAGES.slice();
        portfolioNote.innerHTML = '<strong>Demo mode:</strong> <em>images.json</em> not found. Using fallback images so the gallery works inside this sandbox. To use your own images, create <code>images.json</code> and a <code>/portfolio/</code> folder.';
      }

      renderPortfolioGrid();
    })();

    function renderPortfolioGrid() {
      portfolioGrid.innerHTML = '';
      if (!imagesList.length) {
        portfolioGrid.innerHTML = '<div class="helper">No images available</div>';
        return;
      }

      imagesList.forEach((src, i) => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = `Portfolio image ${i + 1}`;
        img.loading = 'lazy';
        img.addEventListener('click', (e) => { e.stopPropagation(); openLightbox(i); });
        portfolioGrid.appendChild(img);
      });
    }

    function openLightbox(index) {
      if (!imagesList.length) return;
      currentIndex = index;
      lightboxImg.src = imagesList[currentIndex];
      lightbox.classList.add('open');
      // focus for keyboard navigation
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
      lightbox.classList.remove('open');
      lightboxImg.src = '';
      document.body.style.overflow = '';
    }

    function showPrev() {
      if (!imagesList.length) return;
      currentIndex = (currentIndex - 1 + imagesList.length) % imagesList.length;
      lightboxImg.src = imagesList[currentIndex];
    }

    function showNext() {
      if (!imagesList.length) return;
      currentIndex = (currentIndex + 1) % imagesList.length;
      lightboxImg.src = imagesList[currentIndex];
    }

    prevBtn.addEventListener('click', (e) => { e.stopPropagation(); showPrev(); });
    nextBtn.addEventListener('click', (e) => { e.stopPropagation(); showNext(); });

    // Close lightbox when clicking outside the image
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox || e.target === lightboxImg) closeLightbox();
    });

    // Keyboard support: Left/Right to navigate, Esc to close
    document.addEventListener('keydown', (e) => {
      if (!lightbox.classList.contains('open')) return;
      if (e.key === 'ArrowLeft') { e.preventDefault(); showPrev(); }
      else if (e.key === 'ArrowRight') { e.preventDefault(); showNext(); }
      else if (e.key === 'Escape') { e.preventDefault(); closeLightbox(); }
    });

    // Helpful: expose a small API on window for debugging in the sandbox console
    window._opta = {
      reloadPortfolio: loadPortfolio,
      imagesList
    };
  </script>
</body>
</html>
